var N={toJalaali:A,toGregorian:x,isValidJalaaliDate:B,isLeapJalaaliYear:R,jalaaliMonthLength:$,jalCal:T,j2d:W,d2j:Y,g2d:y,d2g:V,jalaaliToDateObject:z,jalaaliWeek:K},L=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function A(a,e,n){return Object.prototype.toString.call(a)==="[object Date]"&&(n=a.getDate(),e=a.getMonth()+1,a=a.getFullYear()),Y(y(a,e,n))}function x(a,e,n){return V(W(a,e,n))}function B(a,e,n){return a>=-61&&a<=3177&&e>=1&&e<=12&&n>=1&&n<=$(a,e)}function R(a){return H(a)===0}function $(a,e){return e<=6?31:e<=11||R(a)?30:29}function H(a){var e=L.length,n=L[0],f,c,p,s,l;if(a<n||a>=L[e-1])throw new Error("Invalid Jalaali year "+a);for(l=1;l<e&&(f=L[l],c=f-n,!(a<f));l+=1)n=f;return s=a-n,c-s<6&&(s=s-c+d(c+4,33)*33),p=j(j(s+1,33)-1,4),p===-1&&(p=4),p}function T(a,e){var n=L.length,f=a+621,c=-14,p=L[0],s,l,k,C,m,b,O;if(a<p||a>=L[n-1])throw new Error("Invalid Jalaali year "+a);for(O=1;O<n&&(s=L[O],l=s-p,!(a<s));O+=1)c=c+d(l,33)*8+d(j(l,33),4),p=s;return b=a-p,c=c+d(b,33)*8+d(j(b,33)+3,4),j(l,33)===4&&l-b===4&&(c+=1),C=d(f,4)-d((d(f,100)+1)*3,4)-150,m=20+c-C,e?{gy:f,march:m}:(l-b<6&&(b=b-l+d(l+4,33)*33),k=j(j(b+1,33)-1,4),k===-1&&(k=4),{leap:k,gy:f,march:m})}function W(a,e,n){var f=T(a,!0);return y(f.gy,3,f.march)+(e-1)*31-d(e,7)*(e-7)+n-1}function Y(a){var e=V(a).gy,n=e-621,f=T(n,!1),c=y(e,3,f.march),p,s,l;if(l=a-c,l>=0){if(l<=185)return s=1+d(l,31),p=j(l,31)+1,{jy:n,jm:s,jd:p};l-=186}else n-=1,l+=179,f.leap===1&&(l+=1);return s=7+d(l,30),p=j(l,30)+1,{jy:n,jm:s,jd:p}}function y(a,e,n){var f=d((a+d(e-8,6)+100100)*1461,4)+d(153*j(e+9,12)+2,5)+n-34840408;return f=f-d(d(a+100100+d(e-8,6),100)*3,4)+752,f}function V(a){var e,n,f,c,p;return e=4*a+139361631,e=e+d(d(4*a+183187720,146097)*3,4)*4-3908,n=d(j(e,1461),4)*5+308,f=d(j(n,153),5)+1,c=j(d(n,153),12)+1,p=d(e,1461)-100100+d(8-c,6),{gy:p,gm:c,gd:f}}function K(a,e,n){var f=z(a,e,n).getDay(),c=f==6?0:-(f+1),p=6+c;return{saturday:Y(W(a,e,n+c)),friday:Y(W(a,e,n+p))}}function z(a,e,n,f,c,p,s){var l=x(a,e,n);return new Date(l.gy,l.gm-1,l.gd,f||0,c||0,p||0,s||0)}function d(a,e){return~~(a/e)}function j(a,e){return a-~~(a/e)*e}var I,S;function P(){if(S)return I;S=1,I={toJalaali:e,toGregorian:n,isValidJalaaliDate:f,isLeapJalaaliYear:c,jalaaliMonthLength:p,jalCal:l,j2d:k,d2j:C,g2d:m,d2g:b,jalaaliToDateObject:q,jalaaliWeek:O};var a=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function e(r,t,i){return Object.prototype.toString.call(r)==="[object Date]"&&(i=r.getDate(),t=r.getMonth()+1,r=r.getFullYear()),C(m(r,t,i))}function n(r,t,i){return b(k(r,t,i))}function f(r,t,i){return r>=-61&&r<=3177&&t>=1&&t<=12&&i>=1&&i<=p(r,t)}function c(r){return s(r)===0}function p(r,t){return t<=6?31:t<=11||c(r)?30:29}function s(r){var t=a.length,i=a[0],o,v,h,D,u;if(r<i||r>=a[t-1])throw new Error("Invalid Jalaali year "+r);for(u=1;u<t&&(o=a[u],v=o-i,!(r<o));u+=1)i=o;return D=r-i,v-D<6&&(D=D-v+g(v+4,33)*33),h=J(J(D+1,33)-1,4),h===-1&&(h=4),h}function l(r,t){var i=a.length,o=r+621,v=-14,h=a[0],D,u,G,F,E,w,M;if(r<h||r>=a[i-1])throw new Error("Invalid Jalaali year "+r);for(M=1;M<i&&(D=a[M],u=D-h,!(r<D));M+=1)v=v+g(u,33)*8+g(J(u,33),4),h=D;return w=r-h,v=v+g(w,33)*8+g(J(w,33)+3,4),J(u,33)===4&&u-w===4&&(v+=1),F=g(o,4)-g((g(o,100)+1)*3,4)-150,E=20+v-F,t?{gy:o,march:E}:(u-w<6&&(w=w-u+g(u+4,33)*33),G=J(J(w+1,33)-1,4),G===-1&&(G=4),{leap:G,gy:o,march:E})}function k(r,t,i){var o=l(r,!0);return m(o.gy,3,o.march)+(t-1)*31-g(t,7)*(t-7)+i-1}function C(r){var t=b(r).gy,i=t-621,o=l(i,!1),v=m(t,3,o.march),h,D,u;if(u=r-v,u>=0){if(u<=185)return D=1+g(u,31),h=J(u,31)+1,{jy:i,jm:D,jd:h};u-=186}else i-=1,u+=179,o.leap===1&&(u+=1);return D=7+g(u,30),h=J(u,30)+1,{jy:i,jm:D,jd:h}}function m(r,t,i){var o=g((r+g(t-8,6)+100100)*1461,4)+g(153*J(t+9,12)+2,5)+i-34840408;return o=o-g(g(r+100100+g(t-8,6),100)*3,4)+752,o}function b(r){var t,i,o,v,h;return t=4*r+139361631,t=t+g(g(4*r+183187720,146097)*3,4)*4-3908,i=g(J(t,1461),4)*5+308,o=g(J(i,153),5)+1,v=J(g(i,153),12)+1,h=g(t,1461)-100100+g(8-v,6),{gy:h,gm:v,gd:o}}function O(r,t,i){var o=q(r,t,i).getDay(),v=o==6?0:-(o+1),h=6+v;return{saturday:C(k(r,t,i+v)),friday:C(k(r,t,i+h))}}function q(r,t,i,o,v,h,D){var u=n(r,t,i);return new Date(u.gy,u.gm-1,u.gd,o||0,v||0,h||0,D||0)}function g(r,t){return~~(r/t)}function J(r,t){return r-~~(r/t)*t}return I}export{N as j,P as r};
