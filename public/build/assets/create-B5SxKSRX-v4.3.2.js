import{V as i}from"./vue-DkJ1Kgzj-v4.3.2.js";import{P as s}from"./ProductMixin-CSfQrEZU-v4.3.2.js";import{E as o}from"./Errors-DymF0diZ-v4.3.2.js";import{g as a}from"./functions-BEowtnx--v4.3.2.js";import"./blueimp-md5-ClWCTRan-v4.3.2.js";import"./wysiwyg-DWLXDX79-v4.3.2.js";import"./tinymce-D10NeNaK-v4.3.2.js";import"./vuedraggable-CJ4SEpMp-v4.3.2.js";import"./vue2-selectize-MkMSbsDd-v4.3.2.js";import"./jquery-BIsrbCJs-v4.3.2.js";import"./vue-flatpickr-component-BX67FyoY-v4.3.2.js";import"./flatpickr-Dji-KtWc-v4.3.2.js";import"./vue-persian-datetime-picker-XQBqzIKs-v4.3.2.js";import"./moment-jalaali-C334XtLq-v4.3.2.js";import"./moment-BjAJxDPL-v4.3.2.js";import"./jalaali-js-D60YAWxD-v4.3.2.js";import"./@melloware-BTYRaMki-v4.3.2.js";import"./NProgress-Byx4Z4Na-v4.3.2.js";import"./nprogress-D1gHBCIW-v4.3.2.js";import"./Toaster-CnFa3GII-v4.3.2.js";import"./vue-toast-notification-Bi_P_VNk-v4.3.2.js";i.prototype.defaultCurrencySymbol=NiceShop.defaultCurrencySymbol;i.prototype.route=route;new i({el:"#app",mixins:[s],data:{formSubmissionType:null,form:{brand_id:"",tax_class_id:"",is_active:!0,media:[],is_virtual:!1,manage_stock:0,in_stock:1,special_price_type:"fixed",meta:{},attributes:[],downloads:[],variations:[],variants:[],options:[],slug:null},errors:new o,selectizeConfig:{plugins:["remove_button"]},searchableSelectizeConfig:{},categoriesSelectizeConfig:{},flatPickrConfig:{mode:"single",enableTime:!0,altInput:!0}},created(){this.setSearchableSelectizeConfig(),this.setCategoriesSelectizeConfig()},methods:{setProductSlug(t){this.form.slug=a(t)},setFormDefaultData(){this.form={brand_id:"",tax_class_id:"",is_active:!0,media:[],is_virtual:!1,manage_stock:0,in_stock:1,special_price_type:"fixed",meta:{},attributes:[],downloads:[],variations:[],variants:[],options:[],slug:null}},resetForm(){this.setFormDefaultData(),this.textEditor.get("description").setContent(""),this.textEditor.get("description").execCommand("mceCancel"),this.resetBulkEditVariantFields(),this.focusField({selector:"#name"})},submit({submissionType:t}){this.formSubmissionType=t,$.ajax({type:"POST",url:route("admin.products.store",{...(t==="save_and_edit"||t==="save_and_exit")&&{exit_flash:!0}}),data:this.transformData(this.form),dataType:"json",success:({message:e,product_id:r})=>{if(t==="save_and_edit"){location.href=route("admin.products.edit",r);return}if(t==="save_and_exit"){location.href=route("admin.products.index");return}toaster(e,{type:"success"}),this.resetForm()}}).catch(e=>{if(this.formSubmissionType=null,toaster(e.responseJSON.message,{type:"default"}),e.status===422){this.errors.reset(),this.errors.record(e.responseJSON.errors),this.focusFirstErrorField(this.$refs.form.elements);return}this.hasAnyVariant&&this.regenerateVariationsAndVariantsUid()}).always(()=>{t==="save"&&(this.formSubmissionType=null)})}}});
